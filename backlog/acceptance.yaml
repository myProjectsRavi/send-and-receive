version: 1
items:
- story: S1
  criteria:
  - Uses window.crypto.subtle
  - 'Algorithm: AES-GCM with 256-bit key'
  - Returns object containing { ciphertext, iv, key }
  - Key is exportable for sharing
- story: S2
  criteria:
  - 'Constructs URL hash format: #iv|ciphertext|key'
  - Uses Base64URL encoding to ensure link safety
  - Handles messages up to URL length limits (approx 2KB safe)
- story: S3
  criteria:
  - 'Parses #iv|ciphertext|key from window.location.hash'
  - Decrypts successfully and renders text
  - Calls history.replaceState to remove hash immediately
  - Shows error if integrity check fails
- story: S4
  criteria:
  - Creates RTCPeerConnection with DataChannel
  - Generates local description (Offer)
  - Displays Offer string in a textarea for copying
  - Includes ICE candidates in the blob (since no trickle ICE)
